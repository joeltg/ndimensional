<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
</head>
<script>
    customElements.define('x-node', class extends HTMLElement {
        constructor() {
            super();
        }
        connectedCallback() {
            const name = this.getAttribute('name');
            const children = [...this.children];
            const {ownerDocument} = document.currentScript;
            customElements.define(name, class extends HTMLElement {
                constructor() {
                    super();
                }
                connectedCallback() {
                    this.style.display = 'block';
                    this.style.border = '1px solid black';
                    this.style.padding = '32px';
                    const root = this.attachShadow({mode: 'open'});
                    children.forEach(child => root.appendChild(ownerDocument.importNode(child, true)));
                }
            });
        }
    });
</script>
</html>